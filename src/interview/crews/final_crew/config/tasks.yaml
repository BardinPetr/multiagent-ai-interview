analyze:
  description: >
    Проанализируй результаты технического интервью на основе предоставленных данных.
    
    # Входные данные
    
    Состояние интервью (interview_state):
    {interview_state}
    
    # Твоя задача
    
    На основе всей информации из состояния интервью составь детальный финальный отчет.
    
    ## Структура отчета:
    
    ### А. ВЕРДИКТ (Decision)
    
    **Grade:** Определи уровень кандидата (Intern / Junior / Middle / Senior / Lead) на основе:
    - Общего балла по hard skills (среднее по всем темам)
    - Количества затронутых тем и их сложности
    - Качества ответов на вопросы разной сложности
    
    **Hiring Recommendation:** 
    - Strong Hire (>0.6 средний балл + хорошие софтскиллы)
    - Hire (0.3-0.6 средний балл, приемлемые софтскиллы)
    - No Hire (<0.3 средний балл или критические пробелы)
        
    **Confidence Score:** Укажи уверенность в оценке (0-100%). Факторы снижения:
    - Малое количество заданных вопросов (< 5)
    - Узкий охват тем
    - Неоднозначные ответы кандидата
    - Неполное рассмотрение
    - Недостаток времени
    - Уход с интервью по желанию кандидата
    - Несоответствие профиля, уровня, опыта или экспертизы с требованием к вакансии 
   
    В случае, если Confidence Score < 50, решение может быть только No Hire
    
    Важно учитывать, что собранной информации должно быть достаточно, чтобы с уверенностью 
    
    ### Б. АНАЛИЗ HARD SKILLS (Technical Review)
    
    Для каждой темы из interview_state.hards создай таблицу:
    
    | Тема | Вопросов задано | Средний балл | Статус |
    |------|----------------|--------------|--------|
    | ... | ... | ... | ✅/❌ |
    
    **✅ Confirmed Skills:** Перечисли темы, где score > 0.3
    
    **❌ Knowledge Gaps:** Перечисли темы, где score < 0.3
    
    **❗ ВАЖНО:** Для каждого провального вопроса из истории (history), где кандидат ошибся
    или сказал "не знаю", приведи:
    - Вопрос
    - Ответ кандидата
    - Правильный ответ (детальный, с пояснениями)
    
    Используй поле evaluator_context.valid_answer если оно есть, иначе составь правильный
    ответ самостоятельно на основе своих знаний.
    
    ### В. АНАЛИЗ SOFT SKILLS & COMMUNICATION
    
    На основе данных из interview_state.softs:
    
    **Clarity (Ясность изложения):** <softs.clarity>/1.0
    - Оценка: <Отличная/Хорошая/Удовлетворительная/Плохая>
    - Комментарий: <Как кандидат излагает мысли>
    
    **Honesty (Честность):** <softs.honesty>/1.0
    - Оценка: <Отличная/Хорошая/Удовлетворительная/Плохая>
    - Комментарий: <Признавал ли пробелы или пытался блефовать>
    
    **Engagement (Вовлеченность):** <softs.engagement>/1.0
    - Оценка: <Отличная/Хорошая/Удовлетворительная/Плохая>
    - Комментарий: <Показывал ли интерес, задавал ли встречные вопросы>
    
    ### Г. ПЕРСОНАЛЬНЫЙ ROADMAP (Next Steps)
    
    На основе выявленных пробелов составь конкретный план развития:
    
    **Приоритет 1 (Критические пробелы):**
    - Тема 1: <Что нужно изучить и почему>
    - Тема 2: <Что нужно изучить и почему>
    
    **Приоритет 2 (Важные улучшения):**
    - Тема 3: <Что нужно подтянуть>
    - Тема 4: <Что нужно подтянуть>
    
    **Приоритет 3 (Дополнительное развитие):**
    - Тема 5: <Что можно изучить для роста>
    
    ** Рекомендуемые ресурсы:**
    Для каждой темы из Приоритет 1-2 предложи:
    - Официальную документацию
    - Статьи/туториалы
    - Книги или курсы (если применимо)
    
    ## Требования к отчету:
    
    1. Используй Markdown форматирование
    2. Будь конкретным и опирайся на факты из интервью
    3. Приводи примеры из истории вопросов-ответов
    4. Давай конструктивную обратную связь
    5. Отчет должен быть на русском языке
    6. Для математических выражений используй $...$ (inline) или $$...$$ (block)

  expected_output: >
    Детальный структурированный отчет в Markdown формате, содержащий:
    - Вердикт с грейдом, рекомендацией по найму и confidence score
    - Полный анализ технических навыков с таблицей
    - Правильные ответы на провальные вопросы
    - Оценку софт скиллов с комментариями
    - Персональный roadmap с приоритетами и ресурсами для изучения
    
    Отчет должен быть объективным, конструктивным и полезным как для 
    принятия решения о найме, так и для развития кандидата.
