initial_evaluation:
  description: >
    Проанализируйте ответ кандидата на вопрос технического интервью и дайте начальную оценку.
    
    **Входные данные:**
    - Вопрос интервью: {question}
    - Ответ кандидата: {answer}
    - Информация о кандидате: {candidate_info}
    
    **Ваша задача:**
    
    1. **Определите тему вопроса** (topic):
       - Выделите 1-2 ключевых слова, описывающих тему
       - Примеры: "Python", "ООП", "SQL", "REST API", "алгоритмы", "Git"
       - Тема должна быть на русском языке
    
    2. **Оцените качество ответа** (initial_score) по шкале от -1.0 до 1.0:
       - **1.0**: Идеальный ответ, демонстрирует глубокое понимание, полный и точный
       - **0.7-0.9**: Отличный ответ, возможны минорные недочеты
       - **0.5-0.6**: Хороший ответ, базовое понимание есть, но не хватает глубины
       - **0.2-0.4**: Удовлетворительный ответ, поверхностное понимание
       - **0.0**: Минимально приемлемый ответ или полное отсутствие ответа
       - **-0.2 до -0.4**: Плохой ответ с ошибками
       - **-0.5 до -0.9**: Очень плохой ответ, много серьезных ошибок
       - **-1.0**: Абсолютное непонимание темы
    
    3. **Сформулируйте правильный ответ** (valid_answer):
       - Напишите, каким должен быть хороший ответ на этот вопрос
       - Ответ должен быть на русском языке
       - Учитывайте уровень позиции кандидата

  expected_output: >
    Формат:
    JSON объект со следующими полями:
    {
      "topic": "тема вопроса (1-2 слова на русском)",
      "initial_score": 0.0,
      "valid_answer": "детальный правильный ответ на русском",
    }
    Нельзя выводить никаких лишних символов, кроме данного сообщения, нельзя использовать markdown или печатать свои размышления вне соответствующего поля сообщения
    Все символы печатать юникодом, без escape-последовательностей

softskills_assessment:
  description: >
    Оцените софтскиллы кандидата на основе манеры его ответа.
    
    **Входные данные:**
    - Ответ кандидата: {answer}
    - Контекст из предыдущей оценки: используйте выводы evaluator
    
    **Ваша задача:**
    
    Оцените три характеристики по шкале от -1.0 до 1.0:
    
    ### 1. Clarity (четкость изложения):
    - **1.0**: Кристально ясное, логически структурированное изложение. Мысль развивается последовательно, используется терминология, есть примеры.
    - **0.5**: Хорошая структура, но могут быть небольшие неясности или избыточность.
    - **0.0**: Средняя четкость. Основную мысль можно понять, но структура не идеальна.
    - **-0.5**: Путаное изложение, сложно выделить главное.
    - **-1.0**: Хаотичное, совершенно непонятное изложение.
    
    ### 2. Honesty (честность):
    - **1.0**: Открыто и честно признает, если чего-то не знает. Не пытается выдать незнание за знание. Четко разделяет "я знаю" и "я предполагаю".
    - **0.5**: В целом честен, но может немного приукрашивать знания.
    - **-0.5**: Попытки скрыть пробелы в знаниях, уклончивые формулировки.
    - **-1.0**: Явные попытки обмана, выдумывание фактов, высокомерие при незнании.
    
    ### 3. Engagement (вовлеченность):
    - **1.0**: Высокая заинтересованность, развернутый ответ, энтузиазм, готовность обсуждать.
    - **-1.0**: Явная незаинтересованность, односложные ответы, желание закончить быстрее.
    
    **Важно:** 
    - Вес каждой характеристики зависит от ее проявления в ответе
    - Если характеристика не проявляется явно - ставьте 0.0
    - Будьте объективны, не додумывайте то, чего нет в ответе

    ответ без размышлений и обоснований не принимается.
    размышления и обоснования ограничены 3 предложениями.
  expected_output: >
    Формат: структурированное сообщение SoftSkillScores со всеми заполненными полями в соответствии с моделью.
    Все рамышления необходимо разместить в поле thoughts модели ответа, ответ без размышлений не принимается.
    размышления и обоснования ограничены 3 предложениями.
    Нельзя выводить никаких лишних символов, кроме данного сообщения, нельзя использовать markdown или печатать свои размышления вне соответствующего поля сообщения
    json нужно вывести максимально кратко без переносов и убедиться в его валидности
    Все символы печатать юникодом, без escape-последовательностей
  context:
    - initial_evaluation

fact_checking:
  description: >
    Проверьте фактическую корректность всех утверждений в ответе кандидата.
    
    **Входные данные:**
    - Вопрос интервью: {question}
    - Ответ кандидата: {answer}
    - Правильный ответ (reference): {valid_answer}
    - Контекст из предыдущей оценки: используйте выводы evaluator
    
    **Ваша задача:**
    
    1. **Выделите все фактические утверждения** из ответа кандидата
       - Технические термины и их определения
       - Утверждения о работе технологий
       - Перечисление характеристик или свойств
       - Описание процессов или алгоритмов
    
    2. **Проверьте каждый факт** и классифицируйте:
       
       **Подтвержденные факты (correct_facts):**
       - Утверждения, полностью соответствующие действительности
       - Правильно использованная терминология
       - Точные описания процессов
       
       **Неподтвержденные факты (incorrect_facts):**
       - Ошибочные утверждения
       - Выдуманные "факты"
       - Неправильно использованные термины
       - Искажение фактов
       
       **Частично верные факты (partial_facts):**
       - Неполные, но не ошибочные утверждения
       - Упрощенные, но в целом правильные объяснения
       - Факты, верные в определенном контексте
    
    **Особые случаи:**
    - Если кандидат рассуждает правильно, но не приводит конкретных фактов - не учитываем никак
    - Если кандидат честно говорит "не знаю" - не учитываем никак
    размышления и обоснования ограничены 3 предложениями.

  expected_output: >
    JSON объект со следующими полями:
    ```json
    {
      "correct_facts": количество подтвержденных фактов,
      "incorrect_facts": количество неподтвержденных фактов,
      "partial_facts": количество частично верных фактов,
      "reasoning": "обоснование проверки фактов на русском"
    }
    ```
  context:
    - initial_evaluation

final_evaluation:
  description: >
    Сформируйте финальную оценку ответа кандидата, учитывая все собранные данные.
    
    **Входные данные:**
    - Начальная оценка: {initial_score}
    - Тема: {topic}
    - Правильный ответ: {valid_answer}
    - Требуется корректировка: {needs_correction}
    - Результаты проверки фактов: {fact_check_results}
    - Оценка софтскиллов: {softskills}
    - Обоснование начальной оценки: {reasoning}
    
    **Алгоритм формирования финальной оценки:**
    
    ### Шаг 1: Начните с initial_score
    
    ### Шаг 2: Примените корректировки на основе проверки фактов
    
    **Подтвержденные факты** (correct_facts):
    - Каждый важный подтвержденный факт: **+0.1 до +0.3**
    - Зависит от сложности и важности факта
    - Максимальная прибавка от всех фактов: **+0.4**
    
    **Неподтвержденные факты** (incorrect_facts):
    - Каждый ошибочный факт: **-0.2 до -0.5**
    - Попытка выдать незнание за знание (обман): **-0.4 до -0.5**
    - Просто ошибка без попытки обмана: **-0.2**
    - Максимальное снижение: **-0.6**
    
    **Частично верные факты** (partial_facts):
    - Каждый частично верный факт: **+0.05 до +0.1**
    - Показывает понимание, но неполное
    
    ### Шаг 3: Бонусы за правильное направление мышления
    
    - Если нет явных фактов, но **мышление правильное**: **+0.1 до +0.2**
    - Если показано **концептуальное понимание**: **+0.15**
    - Если есть **попытка структурированного ответа**: **+0.05**
    
    ### Шаг 4: Учтите софтскиллы
    
    **Honesty (честность):**
    - Если honesty > 0.5: это позитивный фактор, не снижайте оценку за признание незнания
    - Если honesty < -0.5: попытка обмана, **дополнительно -0.2 к score**
    
    **Clarity (четкость):**
    - Если clarity > 0.5 и score близок к границе: можно добавить **+0.05**
    - Отличная структура ответа - признак понимания
    
    **Engagement (вовлеченность):**
    - Низкая вовлеченность (< -0.5) при плохом ответе: сигнал о незаинтересованности
    
    ### Шаг 5: Финализация
    
    - Убедитесь, что **финальная оценка в диапазоне [-1.0, 1.0]**
    - Округлите до 2 знаков после запятой
    
    ### Шаг 6: Определите необходимость корректировки (should_correct_user)
    
    **true (нужна корректировка) если:**
    - score < 0 (плохой ответ)
    - score < 0.3 И есть incorrect_facts (ошибки нужно исправить)
    - score < 0 И honesty < -0.5 (обман нужно пресечь)
    
    **false (корректировка не нужна) если:**
    - score >= 0.5 (хороший ответ)
    - score >= 0 И honesty > 0 (честно признал незнание)
    
    ### Шаг 7: Сформируйте EvaluatorContext
    
    Заполните все поля EvaluatorContext:
    - **has_info_about_answer**: всегда **true**
    - **topic**: из initial_evaluation
    - **score**: финальная скорректированная оценка
    - **should_correct_user**: по правилам выше
    - **valid_answer**: из initial_evaluation
    - **softskills**: объект SoftSkillScores с оценками
    - **thoughts**: детальное описание на русском языке:
      * Начальная оценка и почему
      * Какие факты были проверены
      * Какие корректировки были применены и почему
      * Оценка софтскиллов и их влияние
      * Итоговая оценка и рекомендация по корректировке

    ответ без размышлений и обоснований не принимается.
    размышления и обоснования ограничены 5 предложениями.
  expected_output: >
    Формат: структурированное сообщение EvaluatorContext со всеми заполненными полями в соответствии с моделью.
    размышления и обоснования ограничены 5 предложениями.
    Все рамышления необходимо разместить в поле thoughts модели ответа, ответ без размышлений не принимается.
    Нельзя выводить никаких лишних символов, кроме данного сообщения, нельзя использовать markdown или печатать свои размышления вне соответствующего поля сообщения.
    json нужно вывести максимально кратко без переносов и убедиться в его валидности
    Все символы печатать юникодом, без escape-последовательностей
  context:
    - initial_evaluation
    - fact_checking
    - softskills_assessment
